@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <a href="https://localhost:5005/Account/Login?ReturnUrl=%2Fdiagnostics" onclick="openPopup(); return false;">Đăng nhập</a>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>
<script>
    function openPopup() {
        var url = "https://localhost:5005/Account/Login?ReturnUrl=%2Fdiagnostics";
        var width = 600;
        var height = 400;
        var left = (window.innerWidth - width) / 2;
        var top = (window.innerHeight - height) / 2;

        window.open(url, "_blank", "width=" + width + ",height=" + height + ",left=" + left + ",top=" + top);
        window.addEventListener('message', function (event) {
            if (event.origin === 'http://localhost:5005' && event.data === 'login-success') {
                // Chuyển hướng về trang client sau khi đăng nhập thành công
                window.location.href = 'http://localhost:5002';
            }
        });
    }
</script>
